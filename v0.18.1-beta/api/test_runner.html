<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>TestRunner · CTBase.jl</title><meta name="title" content="TestRunner · CTBase.jl"/><meta property="og:title" content="TestRunner · CTBase.jl"/><meta property="twitter:title" content="TestRunner · CTBase.jl"/><meta name="description" content="Documentation for CTBase.jl."/><meta property="og:description" content="Documentation for CTBase.jl."/><meta property="twitter:description" content="Documentation for CTBase.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="https://control-toolbox.org/assets/css/documentation.css" rel="stylesheet" type="text/css"/><script src="https://control-toolbox.org/assets/js/documentation.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">CTBase.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Introduction</a></li><li><span class="tocitem">User Guides</span><ul><li><a class="tocitem" href="../guide/descriptions.html">Descriptions</a></li><li><a class="tocitem" href="../guide/exceptions.html">Exceptions</a></li><li><a class="tocitem" href="../guide/test-runner.html">Test Runner</a></li><li><a class="tocitem" href="../guide/coverage.html">Coverage</a></li><li><a class="tocitem" href="../guide/api-documentation.html">API Documentation</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Core</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="core_public.html">Public</a></li><li><a class="tocitem" href="core_private.html">Private</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Descriptions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="descriptions_public.html">Public</a></li><li><a class="tocitem" href="descriptions_private.html">Private</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Exceptions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="exceptions_public.html">Public</a></li><li><a class="tocitem" href="exceptions_private.html">Private</a></li></ul></li><li><a class="tocitem" href="unicode.html">Unicode</a></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Extensions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="extensions_public.html">Public</a></li><li><a class="tocitem" href="extensions_private.html">Private</a></li></ul></li><li><a class="tocitem" href="documenter_reference.html">DocumenterReference</a></li><li><a class="tocitem" href="coverage_postprocessing.html">CoveragePostprocessing</a></li><li class="is-active"><a class="tocitem" href="test_runner.html">TestRunner</a><ul class="internal"><li><a class="tocitem" href="#TestRunInfo"><span><code>TestRunInfo</code></span></a></li><li><a class="tocitem" href="#TestSpec"><span><code>TestSpec</code></span></a></li><li><a class="tocitem" href="#_bar_width"><span><code>_bar_width</code></span></a></li><li><a class="tocitem" href="#_builder_to_string"><span><code>_builder_to_string</code></span></a></li><li><a class="tocitem" href="#_collect_test_files_recursive"><span><code>_collect_test_files_recursive</code></span></a></li><li><a class="tocitem" href="#_default_on_test_done"><span><code>_default_on_test_done</code></span></a></li><li><a class="tocitem" href="#_ensure_jl"><span><code>_ensure_jl</code></span></a></li><li><a class="tocitem" href="#_find_symbol_test_file_rel"><span><code>_find_symbol_test_file_rel</code></span></a></li><li><a class="tocitem" href="#_format_progress_line"><span><code>_format_progress_line</code></span></a></li><li><a class="tocitem" href="#_glob_to_regex"><span><code>_glob_to_regex</code></span></a></li><li><a class="tocitem" href="#_has_failures_in_results"><span><code>_has_failures_in_results</code></span></a></li><li><a class="tocitem" href="#_normalize_available_tests"><span><code>_normalize_available_tests</code></span></a></li><li><a class="tocitem" href="#_normalize_selections"><span><code>_normalize_selections</code></span></a></li><li><a class="tocitem" href="#_parse_test_args"><span><code>_parse_test_args</code></span></a></li><li><a class="tocitem" href="#_progress_bar"><span><code>_progress_bar</code></span></a></li><li><a class="tocitem" href="#_resolve_test"><span><code>_resolve_test</code></span></a></li><li><a class="tocitem" href="#_run_single_test"><span><code>_run_single_test</code></span></a></li><li><a class="tocitem" href="#_select_tests"><span><code>_select_tests</code></span></a></li><li><a class="tocitem" href="#_strip_test_prefix"><span><code>_strip_test_prefix</code></span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href="test_runner.html">TestRunner</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="test_runner.html">TestRunner</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/control-toolbox/CTBase.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Private-API"><a class="docs-heading-anchor" href="#Private-API">Private API</a><a id="Private-API-1"></a><a class="docs-heading-anchor-permalink" href="#Private-API" title="Permalink"></a></h1><p>This page lists <strong>non-exported</strong> (internal) symbols of <code>TestRunner</code>.</p><hr/><h3 id="From-TestRunner"><a class="docs-heading-anchor" href="#From-TestRunner">From <code>TestRunner</code></a><a id="From-TestRunner-1"></a><a class="docs-heading-anchor-permalink" href="#From-TestRunner" title="Permalink"></a></h3><h2 id="TestRunInfo"><a class="docs-heading-anchor" href="#TestRunInfo"><code>TestRunInfo</code></a><a id="TestRunInfo-1"></a><a class="docs-heading-anchor-permalink" href="#TestRunInfo" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner.TestRunInfo"><a class="docstring-binding" href="#TestRunner.TestRunInfo"><code>TestRunner.TestRunInfo</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">struct TestRunInfo</code></pre><p>Context information passed to test callbacks (<code>on_test_start</code>, <code>on_test_done</code>).</p><p>Provides details about the current test being executed, including progress information (<code>index</code>, <code>total</code>) and execution results (<code>status</code>, <code>error</code>, <code>elapsed</code>).</p><p><strong>Fields</strong></p><ul><li><code>spec::TestSpec</code>: test identifier (Symbol or relative path String)</li><li><code>filename::String</code>: absolute path of the included test file</li><li><code>func_symbol::Union{Symbol,Nothing}</code>: function to call (<code>nothing</code> if <code>eval_mode=false</code>)</li><li><code>index::Int</code>: 1-based index of the current test in the selected list</li><li><code>total::Int</code>: total number of selected tests</li><li><code>status::Symbol</code>: one of <code>:pre_eval</code>, <code>:post_eval</code>, <code>:skipped</code>, <code>:error</code>, <code>:test_failed</code></li><li><code>error::Union{Exception,Nothing}</code>: captured exception when <code>status == :error</code></li><li><code>elapsed::Union{Float64,Nothing}</code>: wall-clock seconds for the eval phase (only in <code>on_test_done</code>)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; info = TestRunner.TestRunInfo(
           :utils, 
           &quot;/path/to/test_utils.jl&quot;, 
           :test_utils, 
           3, 10, 
           :post_eval, 
           nothing, 
           1.23
       )
TestRunner.TestRunInfo(:utils, &quot;/path/to/test_utils.jl&quot;, :test_utils, 3, 10, :post_eval, nothing, 1.23)

julia&gt; info.status
:post_eval

julia&gt; info.elapsed
1.23</code></pre></div></section></details></article><h2 id="TestSpec"><a class="docs-heading-anchor" href="#TestSpec"><code>TestSpec</code></a><a id="TestSpec-1"></a><a class="docs-heading-anchor-permalink" href="#TestSpec" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner.TestSpec"><a class="docstring-binding" href="#TestRunner.TestSpec"><code>TestRunner.TestSpec</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Union type representing a test specification.</p><p>A test spec can be either:</p><ul><li><code>Symbol</code>: A logical test name (e.g., <code>:utils</code>, <code>:core</code>)</li><li><code>String</code>: A relative file path or glob pattern (e.g., <code>&quot;suite/test_utils.jl&quot;</code>, <code>&quot;suite/core/*&quot;</code>)</li></ul><p>This type is used throughout TestRunner to represent both user-provided selections and internal test identifiers.</p><p><strong>Notes</strong></p><ul><li>Symbol specs are resolved via <code>filename_builder</code> and <code>funcname_builder</code></li><li>String specs are treated as relative paths from <code>test_dir</code></li><li>Glob patterns are supported for String specs</li></ul><p>See also: <a href="extensions_public.html#CTBase.Extensions.run_tests"><code>CTBase.run_tests</code></a>, <a href="test_runner.html#TestRunner._select_tests"><code>TestRunner._select_tests</code></a></p></div></section></details></article><h2 id="_bar_width"><a class="docs-heading-anchor" href="#_bar_width"><code>_bar_width</code></a><a id="_bar_width-1"></a><a class="docs-heading-anchor-permalink" href="#_bar_width" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._bar_width"><a class="docstring-binding" href="#TestRunner._bar_width"><code>TestRunner._bar_width</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_bar_width(total::Int64) -&gt; Int64
</code></pre><p>Compute the progress bar character width based on the number of tests.</p><ul><li><code>total ≤ 20</code>: width equals <code>total</code> (one block per test).</li><li><code>total &gt; 20</code>: fixed width of 20 (some tests skip a block advance).</li></ul><p><strong>Arguments</strong></p><ul><li><code>total::Int</code>: Total number of tests</li></ul><p><strong>Returns</strong></p><ul><li><code>Int</code>: Character width for the progress bar (0 if <code>total ≤ 0</code>)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._bar_width(10)
10

julia&gt; TestRunner._bar_width(25)
20

julia&gt; TestRunner._bar_width(0)
0</code></pre></div></section></details></article><h2 id="_builder_to_string"><a class="docs-heading-anchor" href="#_builder_to_string"><code>_builder_to_string</code></a><a id="_builder_to_string-1"></a><a class="docs-heading-anchor-permalink" href="#_builder_to_string" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._builder_to_string"><a class="docstring-binding" href="#TestRunner._builder_to_string"><code>TestRunner._builder_to_string</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_builder_to_string(x) -&gt; String</code></pre><p>Convert a Symbol or String to String.</p><p>This helper function ensures that builder function outputs are always converted to strings for consistent handling.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Symbol or String to convert</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: The string representation of <code>x</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; TestRunner._builder_to_string(:utils)
&quot;utils&quot;

julia&gt; TestRunner._builder_to_string(&quot;utils&quot;)
&quot;utils&quot;</code></pre></div></section></details></article><h2 id="_collect_test_files_recursive"><a class="docs-heading-anchor" href="#_collect_test_files_recursive"><code>_collect_test_files_recursive</code></a><a id="_collect_test_files_recursive-1"></a><a class="docs-heading-anchor-permalink" href="#_collect_test_files_recursive" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._collect_test_files_recursive"><a class="docstring-binding" href="#TestRunner._collect_test_files_recursive"><code>TestRunner._collect_test_files_recursive</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_collect_test_files_recursive(test_dir::AbstractString) -&gt; Vector{String}</code></pre><p>Recursively collect all <code>.jl</code> files in <code>test_dir</code> (excluding <code>runtests.jl</code>).</p><p>Returns relative paths from <code>test_dir</code>, sorted alphabetically.</p><p><strong>Arguments</strong></p><ul><li><code>test_dir::AbstractString</code>: Root directory to search</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: Relative paths to all <code>.jl</code> files (excluding <code>runtests.jl</code>)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Assuming test_dir contains:
# - test/utils.jl
# - test/core/test_core.jl
# - test/runtests.jl

julia&gt; TestRunner._collect_test_files_recursive(&quot;test&quot;)
2-element Vector{String}:
 &quot;test/core/test_core.jl&quot;
 &quot;test/utils.jl&quot;</code></pre></div></section></details></article><h2 id="_default_on_test_done"><a class="docs-heading-anchor" href="#_default_on_test_done"><code>_default_on_test_done</code></a><a id="_default_on_test_done-1"></a><a class="docs-heading-anchor-permalink" href="#_default_on_test_done" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._default_on_test_done"><a class="docstring-binding" href="#TestRunner._default_on_test_done"><code>TestRunner._default_on_test_done</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_default_on_test_done(info::TestRunner.TestRunInfo)
</code></pre><p>Default progress callback for <code>on_test_done</code>. Prints to <code>stdout</code>.</p><p><strong>Arguments</strong></p><ul><li><code>info::TestRunInfo</code>: Test execution information to display</li></ul><p><strong>Notes</strong></p><ul><li>This is the default callback used when <code>progress=true</code> and no custom <code>on_test_done</code> is provided</li><li>Outputs a formatted progress line to <code>stdout</code> with colors and timing information</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; info = TestRunner.TestRunInfo(
           :test_example, 
           &quot;/path/to/test.jl&quot;, 
           :test_example, 
           5, 10, 
           :post_eval, 
           nothing, 
           1.23
       );

julia&gt; TestRunner._default_on_test_done(info)
[█████░░░░░░░░░░░] ✓ [05/10] test_example (1.2s)</code></pre></div></section></details></article><h2 id="_ensure_jl"><a class="docs-heading-anchor" href="#_ensure_jl"><code>_ensure_jl</code></a><a id="_ensure_jl-1"></a><a class="docs-heading-anchor-permalink" href="#_ensure_jl" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._ensure_jl"><a class="docstring-binding" href="#TestRunner._ensure_jl"><code>TestRunner._ensure_jl</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_ensure_jl(filename::AbstractString) -&gt; String</code></pre><p>Ensure that a filename ends with <code>.jl</code> extension.</p><p>If the filename already ends with <code>.jl</code>, returns it unchanged. Otherwise, appends <code>.jl</code> to the filename.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: Base filename with or without <code>.jl</code> extension</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: Filename guaranteed to end with <code>.jl</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; TestRunner._ensure_jl(&quot;test_utils&quot;)
&quot;test_utils.jl&quot;

julia&gt; TestRunner._ensure_jl(&quot;test_utils.jl&quot;)
&quot;test_utils.jl&quot;</code></pre></div></section></details></article><h2 id="_find_symbol_test_file_rel"><a class="docs-heading-anchor" href="#_find_symbol_test_file_rel"><code>_find_symbol_test_file_rel</code></a><a id="_find_symbol_test_file_rel-1"></a><a class="docs-heading-anchor-permalink" href="#_find_symbol_test_file_rel" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._find_symbol_test_file_rel"><a class="docstring-binding" href="#TestRunner._find_symbol_test_file_rel"><code>TestRunner._find_symbol_test_file_rel</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_find_symbol_test_file_rel(name::Symbol, filename_builder::Function; test_dir::AbstractString) -&gt; Union{String,Nothing}</code></pre><p>Find the relative path to a test file for a given symbol name.</p><p>Uses the <code>filename_builder</code> to construct the expected filename, then searches for files matching that basename. If multiple matches exist (e.g., files in different subdirectories), prefers the shallowest path.</p><p><strong>Arguments</strong></p><ul><li><code>name::Symbol</code>: Test name to resolve</li><li><code>filename_builder::Function</code>: Function that maps test names to filenames</li><li><code>test_dir::AbstractString</code>: Root directory containing test files</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: Relative path to the matching test file</li><li><code>nothing</code>: If no matching file is found</li></ul><p><strong>Notes</strong></p><ul><li>Searches recursively in <code>test_dir</code></li><li>Excludes <code>runtests.jl</code> from consideration</li><li>Prefers shallower paths when multiple matches exist</li><li>Returns the exact relative path if found</li></ul><p>See also: <a href="test_runner.html#TestRunner._collect_test_files_recursive"><code>TestRunner._collect_test_files_recursive</code></a>, <a href="test_runner.html#TestRunner._ensure_jl"><code>TestRunner._ensure_jl</code></a></p></div></section></details></article><h2 id="_format_progress_line"><a class="docs-heading-anchor" href="#_format_progress_line"><code>_format_progress_line</code></a><a id="_format_progress_line-1"></a><a class="docs-heading-anchor-permalink" href="#_format_progress_line" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._format_progress_line"><a class="docstring-binding" href="#TestRunner._format_progress_line"><code>TestRunner._format_progress_line</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_format_progress_line(io::IO, info::TestRunner.TestRunInfo)
</code></pre><p>Write a styled progress line for a completed test to <code>io</code>.</p><p>Uses ANSI colors: green for success, red for errors, yellow for skipped.</p><p><strong>Arguments</strong></p><ul><li><code>io::IO</code>: Output stream to write to</li><li><code>info::TestRunInfo</code>: Test execution information</li></ul><p><strong>Notes</strong></p><ul><li>Format: <code>[progress_bar] symbol [index/total] spec (time) status</code></li><li>Colors: green for success, red for errors, yellow for skipped</li><li>Time is displayed with one decimal place when available</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner, IOBuffer

julia&gt; info = TestRunner.TestRunInfo(
           :test_example, 
           &quot;/path/to/test.jl&quot;, 
           :test_example, 
           5, 10, 
           :post_eval, 
           nothing, 
           1.23
       );

julia&gt; buf = IOBuffer();
julia&gt; TestRunner._format_progress_line(buf, info);
julia&gt; String(take!(buf))
&quot;[█████░░░░░░░░░░░] ✓ [05/10] test_example (1.2s)&quot;</code></pre></div></section></details></article><h2 id="_glob_to_regex"><a class="docs-heading-anchor" href="#_glob_to_regex"><code>_glob_to_regex</code></a><a id="_glob_to_regex-1"></a><a class="docs-heading-anchor-permalink" href="#_glob_to_regex" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._glob_to_regex"><a class="docstring-binding" href="#TestRunner._glob_to_regex"><code>TestRunner._glob_to_regex</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_glob_to_regex(pattern::AbstractString) -&gt; Regex
</code></pre><p>Convert a glob pattern (using <code>*</code> and <code>?</code>) into a regular expression.</p><p>The returned regex is anchored (matches the full string).</p><p><strong>Arguments</strong></p><ul><li><code>pattern::AbstractString</code>: Glob pattern to convert</li></ul><p><strong>Returns</strong></p><ul><li><code>Regex</code>: Anchored regular expression equivalent to the glob pattern</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._glob_to_regex(&quot;test_*.jl&quot;)
r&quot;^test_.*\.jl$&quot;

julia&gt; TestRunner._glob_to_regex(&quot;suite/test_?.jl&quot;)
r&quot;^suite/test.\.jl$&quot;</code></pre></div></section></details></article><h2 id="_has_failures_in_results"><a class="docs-heading-anchor" href="#_has_failures_in_results"><code>_has_failures_in_results</code></a><a id="_has_failures_in_results-1"></a><a class="docs-heading-anchor-permalink" href="#_has_failures_in_results" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._has_failures_in_results"><a class="docstring-binding" href="#TestRunner._has_failures_in_results"><code>TestRunner._has_failures_in_results</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_has_failures_in_results(ts::Test.DefaultTestSet) -&gt; Bool
_has_failures_in_results(
    ts::Test.DefaultTestSet,
    from::Int64
) -&gt; Bool
</code></pre><p>Recursively scan a <code>DefaultTestSet</code> results for <code>Test.Fail</code> or <code>Test.Error</code> entries, starting at index <code>from</code>.</p><p>This is used to detect <code>@test</code> failures that occurred during a specific eval by comparing the results count before and after the eval. The <code>anynonpass</code> field is unreliable because it is only updated when a testset <em>finishes</em> (in <code>Test.finish</code>).</p><p><strong>Arguments</strong></p><ul><li><code>ts::Test.DefaultTestSet</code>: TestSet to scan</li><li><code>from::Int</code>: Starting index for scanning (default: <code>1</code>)</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code>: <code>true</code> if any failures are found, <code>false</code> otherwise</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner, Test

julia&gt; ts = Test.DefaultTestSet(&quot;test&quot;, [])
julia&gt; Test.@testset &quot;example&quot; begin
           Test.@test 1 == 1
           Test.@test 2 == 0  # This will fail
       end
Test.DefaultTestSet(&quot;example&quot;, Any[Test.Pass(1), Test.Fail(&quot;false&quot;)])

julia&gt; TestRunner._has_failures_in_results(ts)
true</code></pre></div></section></details></article><h2 id="_normalize_available_tests"><a class="docs-heading-anchor" href="#_normalize_available_tests"><code>_normalize_available_tests</code></a><a id="_normalize_available_tests-1"></a><a class="docs-heading-anchor-permalink" href="#_normalize_available_tests" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._normalize_available_tests"><a class="docstring-binding" href="#TestRunner._normalize_available_tests"><code>TestRunner._normalize_available_tests</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_normalize_available_tests(available_tests) -&gt; Vector{TestSpec}</code></pre><p>Normalize and validate the <code>available_tests</code> argument.</p><p>Converts the input to a <code>Vector{TestSpec}</code> and validates that all entries are either <code>Symbol</code> or <code>String</code>. Returns an empty vector if <code>available_tests</code> is <code>nothing</code>.</p><p><strong>Arguments</strong></p><ul><li><code>available_tests</code>: <code>nothing</code>, <code>Vector</code>, or <code>Tuple</code> containing <code>Symbol</code> or <code>String</code> entries</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{TestSpec}</code>: Normalized vector of test specifications</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If <code>available_tests</code> is not a Vector/Tuple or contains invalid entries</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; TestRunner._normalize_available_tests([:utils, &quot;suite/*&quot;])
2-element Vector{Union{Symbol, String}}:
 :utils
 &quot;suite/*&quot;

julia&gt; TestRunner._normalize_available_tests(nothing)
Union{Symbol, String}[]</code></pre></div></section></details></article><h2 id="_normalize_selections"><a class="docs-heading-anchor" href="#_normalize_selections"><code>_normalize_selections</code></a><a id="_normalize_selections-1"></a><a class="docs-heading-anchor-permalink" href="#_normalize_selections" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._normalize_selections"><a class="docstring-binding" href="#TestRunner._normalize_selections"><code>TestRunner._normalize_selections</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_normalize_selections(
    selections::Vector{String},
    candidates::Vector{&lt;:Union{String, Symbol}}
) -&gt; Vector{String}
</code></pre><p>Normalize user-provided selection patterns before glob matching.</p><p>Applied transformations:</p><ul><li>Strip trailing <code>/</code> (e.g. <code>&quot;suite/exceptions/&quot;</code> → <code>&quot;suite/exceptions&quot;</code>)</li><li>If a selection contains no glob wildcard (<code>*</code> or <code>?</code>) and matches a directory prefix of at least one candidate, expand it to <code>&quot;selection/*&quot;</code> so that all files under that directory are selected.</li></ul><p>The original selection is always kept so that exact-name matches still work.</p><p><strong>Arguments</strong></p><ul><li><code>selections::Vector{String}</code>: User-provided selection patterns</li><li><code>candidates::Vector{&lt;:TestSpec}</code>: Available test candidates</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: Normalized selection patterns</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._normalize_selections(
           [&quot;suite/&quot;], 
           [&quot;suite/test_a.jl&quot;, &quot;suite/test_b.jl&quot;]
       )
2-element Vector{String}:
 &quot;suite&quot;
 &quot;suite/*&quot;</code></pre></div></section></details></article><h2 id="_parse_test_args"><a class="docs-heading-anchor" href="#_parse_test_args"><code>_parse_test_args</code></a><a id="_parse_test_args-1"></a><a class="docs-heading-anchor-permalink" href="#_parse_test_args" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._parse_test_args"><a class="docstring-binding" href="#TestRunner._parse_test_args"><code>TestRunner._parse_test_args</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_parse_test_args(
    args::Vector{String}
) -&gt; Tuple{Vector{String}, Bool, Bool}
</code></pre><p>Parse command-line test arguments, filtering out coverage-related flags.</p><p><strong>Arguments</strong></p><ul><li><code>args::Vector{String}</code>: Raw command-line arguments</li></ul><p><strong>Returns</strong></p><ul><li><code>Tuple{Vector{String}, Bool, Bool}</code>: <code>(selections, run_all, dry_run)</code> where:<ul><li><code>selections</code>: selection patterns provided by the user (as strings)</li><li><code>run_all</code>: whether <code>-a</code> / <code>--all</code> was present</li><li><code>dry_run</code>: whether <code>-n</code> / <code>--dryrun</code> was present</li></ul></li></ul><p><strong>Notes</strong></p><ul><li>Coverage flags (<code>coverage=true</code>, <code>--coverage</code>, etc.) are automatically filtered out</li><li>Selection patterns starting with <code>test/</code> or <code>test\</code> are automatically stripped so that users can write <code>test/suite/foo</code> or <code>suite/foo</code> interchangeably</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._parse_test_args([&quot;utils&quot;, &quot;-a&quot;, &quot;--dryrun&quot;])
([&quot;utils&quot;], true, true)

julia&gt; TestRunner._parse_test_args([&quot;test/suite&quot;, &quot;coverage=true&quot;])
([&quot;suite&quot;], false, false)</code></pre></div></section></details></article><h2 id="_progress_bar"><a class="docs-heading-anchor" href="#_progress_bar"><code>_progress_bar</code></a><a id="_progress_bar-1"></a><a class="docs-heading-anchor-permalink" href="#_progress_bar" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._progress_bar"><a class="docstring-binding" href="#TestRunner._progress_bar"><code>TestRunner._progress_bar</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_progress_bar(index::Int64, total::Int64; width) -&gt; String
</code></pre><p>Render a progress bar string like <code>[████████░░░░░░░░░░░]</code>.</p><p>When <code>width</code> is <code>nothing</code> (default), the width is computed automatically via <code>_bar_width(total)</code>. Returns an empty string when the bar is hidden.</p><p><strong>Arguments</strong></p><ul><li><code>index::Int</code>: current progress (1-based)</li><li><code>total::Int</code>: total number of items</li><li><code>width::Union{Int,Nothing}</code>: character width of the bar (default: auto)</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: Progress bar string, or empty string if hidden</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._progress_bar(5, 10)
&quot;[█████░░░░░]&quot;

julia&gt; TestRunner._progress_bar(5, 10; width=20)
&quot;[████████████████████░░░░░░]&quot;

julia&gt; TestRunner._progress_bar(0, 10; width=5)
&quot;[░░░░░]&quot;</code></pre></div></section></details></article><h2 id="_resolve_test"><a class="docs-heading-anchor" href="#_resolve_test"><code>_resolve_test</code></a><a id="_resolve_test-1"></a><a class="docs-heading-anchor-permalink" href="#_resolve_test" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._resolve_test"><a class="docstring-binding" href="#TestRunner._resolve_test"><code>TestRunner._resolve_test</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_resolve_test(
    spec::Union{String, Symbol};
    available_tests,
    filename_builder,
    funcname_builder,
    eval_mode,
    test_dir
)
</code></pre><p>Resolve a test spec into an absolute filename and function symbol.</p><p>Handles both <code>String</code> specs (relative paths) and <code>Symbol</code> specs (logical names). Raises errors if the file is not found or if <code>eval_mode=true</code> but no function can be determined.</p><p><strong>Arguments</strong></p><ul><li><code>spec::TestSpec</code>: Test specification to resolve</li><li><code>available_tests::AbstractVector{&lt;:TestSpec}</code>: Available tests for validation</li><li><code>filename_builder::Function</code>: Function to map test names to filenames</li><li><code>funcname_builder::Function</code>: Function to map test names to function names</li><li><code>eval_mode::Bool</code>: Whether to resolve a function name</li><li><code>test_dir::String</code>: Root directory containing test files</li></ul><p><strong>Returns</strong></p><ul><li><code>Tuple{String, Union{Symbol,Nothing}}</code>: <code>(filename, func_symbol)</code> where:<ul><li><code>filename</code>: Absolute path to the test file</li><li><code>func_symbol</code>: Function symbol to call (or <code>nothing</code> if <code>eval_mode=false</code>)</li></ul></li></ul><p><strong>Throws</strong></p><ul><li><code>ErrorException</code>: If the test file is not found</li><li><code>ErrorException</code>: If <code>eval_mode=true</code> but no function can be determined</li></ul><p><strong>Notes</strong></p><ul><li>This function is not part of the public API</li><li>Use <code>run_tests</code> for running tests with proper error handling</li></ul></div></section></details></article><h2 id="_run_single_test"><a class="docs-heading-anchor" href="#_run_single_test"><code>_run_single_test</code></a><a id="_run_single_test-1"></a><a class="docs-heading-anchor-permalink" href="#_run_single_test" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._run_single_test"><a class="docstring-binding" href="#TestRunner._run_single_test"><code>TestRunner._run_single_test</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_run_single_test(
    spec::Union{String, Symbol};
    available_tests,
    filename_builder,
    funcname_builder,
    eval_mode,
    test_dir,
    index,
    total,
    on_test_start,
    on_test_done
)
</code></pre><p>Run a single selected test.</p><p>This helper:</p><ul><li>Resolves a test filename via <code>filename_builder</code></li><li>Includes the file into <code>Main</code></li><li>Calls <code>on_test_start</code> (if provided) after include, before eval</li><li>Optionally evaluates a function (via <code>funcname_builder</code>) when <code>eval_mode=true</code></li><li>Calls <code>on_test_done</code> (if provided) after eval, skip, or error</li></ul><p><strong>Arguments</strong></p><ul><li><code>spec::TestSpec</code>: Test specification to run</li><li><code>available_tests::AbstractVector{&lt;:TestSpec}</code>: Available tests for validation</li><li><code>filename_builder::Function</code>: Function to map test names to filenames</li><li><code>funcname_builder::Function</code>: Function to map test names to function names</li><li><code>eval_mode::Bool</code>: Whether to evaluate the function after include</li><li><code>test_dir::String</code>: Root directory containing test files</li><li><code>index::Int</code>: 1-based index in the selected list (default: <code>1</code>)</li><li><code>total::Int</code>: Total number of selected tests (default: <code>1</code>)</li><li><code>on_test_start::Union{Function,Nothing}</code>: Callback before eval (default: <code>nothing</code>)</li><li><code>on_test_done::Union{Function,Nothing}</code>: Callback after eval (default: <code>nothing</code>)</li></ul><p><strong>Notes</strong></p><ul><li>This function is not part of the public API</li><li>Use <code>run_tests</code> for running multiple tests with proper orchestration</li></ul></div></section></details></article><h2 id="_select_tests"><a class="docs-heading-anchor" href="#_select_tests"><code>_select_tests</code></a><a id="_select_tests-1"></a><a class="docs-heading-anchor-permalink" href="#_select_tests" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._select_tests"><a class="docstring-binding" href="#TestRunner._select_tests"><code>TestRunner._select_tests</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_select_tests(
    selections::Vector{String},
    available_tests::AbstractVector{&lt;:Union{String, Symbol}},
    run_all::Bool,
    filename_builder::Function;
    test_dir
) -&gt; Vector{Union{String, Symbol}}
</code></pre><p>Determine which tests to run based on selections, available_tests filter, and file globbing.</p><ol><li>Identify potential test files in <code>test_dir</code> (default: <code>test/</code>).</li><li>Filter by <code>available_tests</code> if provided.</li><li>Filter by <code>selections</code> (interpreted as globs) if present.</li></ol><p><strong>Arguments</strong></p><ul><li><code>selections::Vector{String}</code>: User-provided selection patterns</li><li><code>available_tests::AbstractVector{&lt;:TestSpec}</code>: Allowed tests (empty = auto-discovery)</li><li><code>run_all::Bool</code>: Whether to run all available tests</li><li><code>filename_builder::Function</code>: Function to map test names to filenames</li><li><code>test_dir::String</code>: Root directory containing test files</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{TestSpec}</code>: Selected test specifications</li></ul><p><strong>Notes</strong></p><ul><li>If <code>available_tests</code> is empty, this function falls back to an auto-discovery heuristic using the filename stem as the candidate test name</li><li>Selection arguments are matched against multiple representations of each candidate</li></ul></div></section></details></article><h2 id="_strip_test_prefix"><a class="docs-heading-anchor" href="#_strip_test_prefix"><code>_strip_test_prefix</code></a><a id="_strip_test_prefix-1"></a><a class="docs-heading-anchor-permalink" href="#_strip_test_prefix" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TestRunner._strip_test_prefix"><a class="docstring-binding" href="#TestRunner._strip_test_prefix"><code>TestRunner._strip_test_prefix</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">_strip_test_prefix(s::AbstractString) -&gt; Any
</code></pre><p>Strip a leading <code>test/</code> or <code>test\</code> prefix from a selection pattern.</p><p>This allows users to type <code>test/suite/foo</code> instead of <code>suite/foo</code> since the test directory is already the root for pattern matching.</p><p><strong>Arguments</strong></p><ul><li><code>s::AbstractString</code>: Selection pattern to process</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: Pattern with <code>test/</code> or <code>test\</code> prefix stripped (if present)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CTBase.TestRunner

julia&gt; TestRunner._strip_test_prefix(&quot;test/suite/foo&quot;)
&quot;suite/foo&quot;

julia&gt; TestRunner._strip_test_prefix(&quot;suite/foo&quot;)
&quot;suite/foo&quot;

julia&gt; TestRunner._strip_test_prefix(&quot;test\windows\path&quot;)
&quot;windows\path&quot;</code></pre></div></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="coverage_postprocessing.html">« CoveragePostprocessing</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 10 February 2026 17:24">Tuesday 10 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
